{% extends "base.html" %}

{% block title %}Edit Contraindication{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
    <h2>Edit Contraindication</h2>
    <form method="POST" action="/contraindication/{{ contraindication.id }}/delete" style="display: inline;" 
          onsubmit="return confirm('Are you sure you want to delete this contraindication?')">
        <button type="submit" class="btn" style="background: #dc3545;">Delete Contraindication</button>
    </form>
</div>

<form method="POST" style="max-width: 800px;">
    <div class="form-group">
        <label for="practice_sanskrit">Practice Name (Sanskrit)</label>
        <input type="text" id="practice_sanskrit" name="practice_sanskrit" 
               value="{{ contraindication.practice_sanskrit or '' }}" placeholder="e.g., Shavasana">
    </div>
    
    <div class="form-group">
        <label for="practice_english">Practice Name (English) *</label>
        <input type="text" id="practice_english" name="practice_english" required
               value="{{ contraindication.practice_english }}" placeholder="e.g., Corpse pose">
    </div>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
        <div class="form-group">
            <label for="kosa">Kosa *</label>
            <select id="kosa" name="kosa" required>
                <option value="">Select Kosa</option>
                <option value="Annamaya_Kosa" {% if contraindication.kosa == 'Annamaya_Kosa' %}selected{% endif %}>Annamaya Kosa</option>
                <option value="Pranamaya_Kosa" {% if contraindication.kosa == 'Pranamaya_Kosa' %}selected{% endif %}>Pranamaya Kosa</option>
                <option value="Manomaya_Kosa" {% if contraindication.kosa == 'Manomaya_Kosa' %}selected{% endif %}>Manomaya Kosa</option>
                <option value="Vijnanamaya_Kosa" {% if contraindication.kosa == 'Vijnanamaya_Kosa' %}selected{% endif %}>Vijnanamaya Kosa</option>
                <option value="Anandamaya_Kosa" {% if contraindication.kosa == 'Anandamaya_Kosa' %}selected{% endif %}>Anandamaya Kosa</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="sub_category">Sub-Category</label>
            <input type="text" id="sub_category" name="sub_category" value="{{ contraindication.sub_category or '' }}">
        </div>
    </div>
    
    <div class="form-group">
        <label for="reason">Reason for Contraindication</label>
        <textarea id="reason" name="reason" 
                  placeholder="Why is this practice contraindicated?">{{ contraindication.reason or '' }}</textarea>
    </div>
    
    <div style="padding: 1.5rem; background: #f8f9fa; border-radius: 8px; margin-bottom: 1.5rem;">
        <h4 style="margin-bottom: 1rem;">For Which Diseases *</h4>
        <p style="color: #666; margin-bottom: 1rem;">Select which disease(s) this contraindication applies to:</p>
        
        {% for disease in diseases %}
        <div style="margin-bottom: 0.5rem;">
            <label style="display: flex; align-items: center; cursor: pointer;">
                <input type="checkbox" name="diseases" value="{{ disease.id }}" 
                       {% if disease in contraindication.diseases %}checked{% endif %}
                       style="margin-right: 0.5rem;">
                {{ disease.name }}
            </label>
        </div>
        {% endfor %}
    </div>
    
    <div style="display: flex; gap: 1rem;">
        <button type="submit" class="btn">Update Contraindication</button>
        <a href="/contraindications" class="btn btn-secondary">Cancel</a>
    </div>
</form>
{% endblock %}
